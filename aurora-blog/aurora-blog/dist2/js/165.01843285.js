"use strict";(self["webpackChunkaurora_blog"]=self["webpackChunkaurora_blog"]||[]).push([[165],{46141:function(e,l,a){a.d(l,{v:function(){return o}});var t=a(47139);const o=(0,t.Q_)("tagStore",{state:()=>({homeTags:"",tags:""}),actions:{}})},82165:function(e,l,a){a.r(l),a.d(l,{default:function(){return b}});var t=a(73396),o=a(44870),m=a(72748),i=a(56265),u=a.n(i),n=a(47178),s=a(96e3),d=a(73286),r=a(46141);const p=["src"],c=(0,t.Uk)("Click to upload"),g=(0,t._)("div",{class:"el-upload__tip"}," jpg/png files with a size less than 500KB. ",-1),f=(0,t.Uk)("Click to upload"),v=(0,t._)("div",{class:"el-upload__tip"}," jpg/png files with a size less than 500KB. ",-1),w=(0,t.Uk)("Create"),y=(0,t.Uk)("Cancel");var _=(0,t.aZ)({__name:"memory",setup(e){const l=(0,o.qj)({memoryTitle:"",region:"",tagNames:"",memoryContent:"",memoryCover:""});let a=(0,r.v)();const i=()=>{d.Z.getAllTags().then((({data:e})=>{a.tags=e.data}))};(0,t.bv)((()=>{i()}));const _=()=>{let e={memoryTitle:l.memoryTitle,region:l.region,tagNames:[l.tagNames],memoryContent:l.memoryContent,memoryCover:k&&k.value,audioUrl:H&&H.value,videoUrl:N&&N.value};u().post("/api/admin/memory",e).then((({data:e})=>{e.flag?n.z8.success("success"):n.z8.warning(e.msg)})),console.log(l),console.log("submit!")},h=(0,o.iH)([]),b=(0,o.iH)([]),W=(0,o.iH)([]),C=(e,l)=>{n.z8.warning(`The limit is 3, you selected ${e.length} files this time, add up to ${e.length+l.length} totally`)},U=(e,l)=>s.T.confirm(`Cancel the transfer of ${e.name} ?`).then((()=>!0),(()=>!1)),V=(e,l)=>{n.z8.warning(`The limit is 3, you selected ${e.length} files this time, add up to ${e.length+l.length} totally`)},T=(e,l)=>s.T.confirm(`Cancel the transfer of ${e.name} ?`).then((()=>!0),(()=>!1)),k=(0,o.iH)(""),H=(0,o.iH)(""),N=(0,o.iH)(""),j=(0,o.iH)(!1),x=(0,o.iH)(!1),z=(0,o.iH)(!1),$=(e,l)=>{console.log(e,l)},A=(e,l)=>{console.log(e,l)},I=(e,l)=>{console.log(e,l)},M=e=>{k.value=e.data,j.value=!0},O=e=>{H.value=e.data,x.value=!0},B=e=>{N.value=e.data,z.value=!0};return(e,i)=>{const u=(0,t.up)("el-input"),n=(0,t.up)("el-form-item"),s=(0,t.up)("el-icon"),d=(0,t.up)("el-upload"),r=(0,t.up)("el-dialog"),H=(0,t.up)("el-option"),N=(0,t.up)("el-select"),x=(0,t.up)("el-button"),z=(0,t.up)("el-form");return(0,t.wg)(),(0,t.j4)(z,{model:l,"label-width":"120px",style:{"background-color":"#fff",padding:"30px","border-radius":"30px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"Memory Title"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{style:{width:"20vw"},modelValue:l.memoryTitle,"onUpdate:modelValue":i[0]||(i[0]=e=>l.memoryTitle=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,{label:"Memory Image"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{limit:1,"file-list":h.value,"onUpdate:file-list":i[1]||(i[1]=e=>h.value=e),action:"/api/admin/memory/images","list-type":"picture-card","on-success":M,"on-remove":$},{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,o.SU)(m.Plus))])),_:1})])),_:1},8,["file-list"]),(0,t.Wm)(r,{modelValue:j.value,"onUpdate:modelValue":i[2]||(i[2]=e=>j.value=e)},{default:(0,t.w5)((()=>[(0,t._)("img",{"w-full":"",src:k.value,alt:"Preview Image"},null,8,p)])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(n,{label:"Tags"},{default:(0,t.w5)((()=>[(0,t.Wm)(N,{modelValue:l.tagNames,"onUpdate:modelValue":i[3]||(i[3]=e=>l.tagNames=e),placeholder:"please select"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(a).tags,(e=>((0,t.wg)(),(0,t.j4)(H,{key:e.tagName,label:e.tagName,value:e.tagName},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(n,{label:"Memory Video"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{accept:"*video/mp4","file-list":b.value,"onUpdate:file-list":i[4]||(i[4]=e=>b.value=e),class:"upload-demo",action:"/api/admin/memory/images",multiple:"","on-success":O,"on-remove":A,"before-remove":U,"on-exceed":C},{tip:(0,t.w5)((()=>[g])),default:(0,t.w5)((()=>[(0,t.Wm)(x,{type:"primary"},{default:(0,t.w5)((()=>[c])),_:1})])),_:1},8,["file-list"])])),_:1}),(0,t.Wm)(n,{label:"Memory Audio"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{accept:"*video/mp3","file-list":W.value,"onUpdate:file-list":i[5]||(i[5]=e=>W.value=e),class:"upload-demo",action:"/api/admin/memory/images",multiple:"","on-success":B,"on-remove":I,"before-remove":T,"on-exceed":V},{tip:(0,t.w5)((()=>[v])),default:(0,t.w5)((()=>[(0,t.Wm)(x,{type:"primary"},{default:(0,t.w5)((()=>[f])),_:1})])),_:1},8,["file-list"])])),_:1}),(0,t.Wm)(n,{label:"Location"},{default:(0,t.w5)((()=>[(0,t.Wm)(N,{modelValue:l.region,"onUpdate:modelValue":i[6]||(i[6]=e=>l.region=e),placeholder:"please select"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{label:"LOCATION_A",value:"shanghai"}),(0,t.Wm)(H,{label:"LOCATION_B",value:"beijing"})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(n,{label:"Detail"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{style:{width:"20vw"},modelValue:l.memoryContent,"onUpdate:modelValue":i[7]||(i[7]=e=>l.memoryContent=e),rows:3,type:"textarea"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t.Wm)(x,{type:"primary",onClick:_},{default:(0,t.w5)((()=>[w])),_:1}),(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[y])),_:1})])),_:1})])),_:1},8,["model"])}}});const h=_;var b=h}}]);